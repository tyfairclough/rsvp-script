<!doctype html>

<html lang="en">
<head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
	<base href="https://www.heyros.ie/">
	<meta name="author" content="Ty">
	<meta name="description" content="heyrosie the home of Rosie">
	<meta name="generator" content="Joomla! - Open Source Content Management">
	<title>Rosie's Birthday Parade - Rosie's Birthday Parade</title>
	<!-- <link href="https://www.heyros.ie/templates/yootheme/css/theme.9.css?1589314221" rel="stylesheet"> -->
	<script>
document.addEventListener('DOMContentLoaded', function() {
            Array.prototype.slice.call(document.querySelectorAll('a span[id^="cloak"]')).forEach(function(span) {
                span.innerText = span.textContent;
            });
        });
var $theme = {};
	</script>
	<!--googleoff: index-->
<script type="text/javascript">
window.kt = {
	"environment": "production",
	"rootUrl": "https://www.heyros.ie",
	"ajaxUrl": "https://www.heyros.ie/index.php?option=com_komento&lang=&Itemid=114",
	"baseUrl": "https://www.heyros.ie/index.php?option=com_komento&lang=none&Itemid=114",
	"token": "1d63d4af0e54c78f8b66dcd36d47a6b5",
	"mobile": false,
	"siteName": "Rosie's Birthday Parade",
	"locale": "en-GB",
	"direction": "ltr",
	"ratings": {
		"options": {
			"starType": 'i',
			"half": true,
			"starOn": 'fa fa-fw fa-star fa-star--on',
			"starOff": 'fa fa-fw fa-star-o fa-star--off',
			"starHalf": 'fa fa-fw fa-star-half-o',
			"hints": [
						"bad",
						"poor",
						"regular",
						"good",
						"gorgeous"
			]
		}
	}
};
</script>
<!--googleon: index-->


    </head>

<body>

<div class="tm-page">
  <div class="uk-section-primary" tm-header-transparent="dark">



<div class="uk-width-1-1">


<div class="tm-header-placeholder uk-margin-remove-adjacent"></div>
<div class="uk-margin-large uk-grid uk-grid-stack" uk-grid="">
<div class="uk-light uk-flex-auto uk-width-1-1@m uk-first-column">





<div id="page#0-0-0-0" class="uk-margin-large uk-text-center">
<img class="el-image uk-border-circle uk-box-shadow-large" alt="" data-src="/templates/yootheme/cache/rosie_avatar_2-1b98e0a9.png" data-srcset="/templates/yootheme/cache/rosie_avatar_2-1b98e0a9.png 150w, /templates/yootheme/cache/rosie_avatar_2-11e00049.png 300w" data-sizes="(min-width: 150px) 150px" data-width="150" data-height="150" uk-img="" src="https://www.heyros.ie/templates/yootheme/cache/rosie_avatar_2-1b98e0a9.png" sizes="(min-width: 150px) 150px" srcset="/templates/yootheme/cache/rosie_avatar_2-1b98e0a9.png 150w, /templates/yootheme/cache/rosie_avatar_2-11e00049.png 300w">

</div>

<h1 class="uk-heading-large uk-width-xlarge uk-margin-auto uk-text-center">        RSVP    </h1>
<div class="uk-margin-large uk-margin-remove-bottom uk-text-center">




<a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="" id="clearData">
Reset form
</a>





</div>




</div>
</div>

</div>



  </div>
  <div class="uk-section-primary" tm-header-transparent="dark" id="rsvp">
    <div class="uk-width-1-1">
      <section class="emptyState">
        Add your first guest
        <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="">
        Add a guest
        </a>
        </section>

        <section class="addPerson">
          <p>Add guest details</p>
            <h3>Name</h3>
            <h3>Age</h3>
            <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="">
            Continue
            </a>
        </section>

        <section class="checkDiet">
          <p>Do you have any dietary restrictions?</p>
          <p>No</p>
          <p>Yes</p>
          <p>Provide details</p>
          <textbox></textbox>
          <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="">
          Continue
          </a>
        </section>

        <section class="addOrder">
            <ul>
                <li>vegan</li>
                <li>vege</li>
                <li>carne</li>
            </ul>
            <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="">
            Add to reversation
            </a>
        </section>

        <section class="orderTable">
          <table>
          <thead>
          <tr>
          <th>Name</th>
          <th>Meal size</th>
          <th>Dietary restrictions</th>
          <th>Menu choice</th>
          <th></th>
          </tr>
          </thead>
          <tbody>
            <tr>
              <td>John</td>
              <td>Adult</td>
              <td>Nothing</td>
              <td>Vegan</td>
              <td>Remove</td>
            </tr>
          </tbody>
          </table>
          <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="" id="confirmOrder">
          Confirm reservation
          </a>
          <a class="el-content uk-button uk-button-secondary uk-button-large" href="#" uk-scroll="" id="newOrder">
          Add another guest
          </a>
        </section>

        <section class="orderConfirmed">
          <p>
            Thanks for RSVPing!
            </p>
          </section>
    </div>
  </div>


  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossOrigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossOrigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js" integrity="sha256-Fh801SO9gqegfUdkDxyzXzIUPWzO/Vatqj8uN+5xcL4=" crossOrigin="anonymous"></script>
  <script>


  $(document).ready(function () {


    // reset the local storage
    $("#clearData").click(function(e){
      e.preventDefault();
      localStorage.clear();
      location.reload();
    })

    //reset visibility of all sections
    $("#rsvp section").hide();
    // var order = localStorage.getItem("order");


    // check if there is an existing order in place
    console.log("order state: " + JSON.parse(localStorage.getItem("order")));
    if (localStorage.getItem("order") !== null) {
      // if an existing order is in place fetch the existing orders
      console.log("order found")
      orderTable();
      var order = JSON.parse(localStorage.getItem("order"));
    } else {
      // else set up a new order
      console.log("order not found");
      var order = [];
      localStorage.setItem("order","[]");
      console.log(order)
      intialiseOrder();
    }

    function intialiseOrder(){
      console.log("initialised order");
      // show the add first person to order empty state
      $("#rsvp .emptyState").show();
      // switch to the add first person input screen
      $("section.emptyState a").click(function(e){
        e.preventDefault();
        $("section.emptyState").hide();
        $("section.addPerson").show();
        addPerson();
      });
    }

    function addPerson(){
      orderDetails = {};
      // add the person's basic details
      console.log("add person intiated");
      console.log(orderDetails);
      $("section.addPerson a").click(function(e){
        e.preventDefault();
        $("section.addPerson").hide();
        $("section.checkDiet").show();
        // add person to object which is then added to an array at the end
        orderDetails.name = "Ty Fairclough";
        orderDetails.age = "adult";
        checkDiet(orderDetails);
      });
    }

    function checkDiet(orderDetails){
      // check the person has any dietary requirements
      console.log("check diet intiated");
      $("section.checkDiet a").click(function(e){
        e.preventDefault();
        $("section.checkDiet").hide();
        $("section.addOrder").show();
        orderDetails.diet = "I can't eat horses";
        console.log(orderDetails)
        addOrder(orderDetails);
      });
    };

    function addOrder(orderDetails){
      // get the persons menu choice
      console.log("addOrder intiated");
      $("section.addOrder a").click(function(e){
        e.preventDefault();
        $("section.addOrder").hide();
        orderDetails.menu = "vegan";
        console.log(orderDetails)
        // now the person's order is complete add it to the array of orders and store it locally
        addToArray(orderDetails);
      });
    }

    function addToArray(orderDetails){
      console.log("orderDetails")
      console.log(orderDetails);
      order = JSON.parse(localStorage.getItem("order"));
      console.log("local order is: " + localStorage.getItem("order"))
      order.push(orderDetails);
      console.log("order details are: " + orderDetails)
      localStorage.setItem("order", JSON.stringify(order));
      orderTable();
    };

    function orderTable(){
      // fetch the locally stored orders and setup the table in order to render it.
      console.log("orderTable intiated");
      var content = "";
      // var order = [];
      var order = JSON.parse(localStorage.getItem("order"));
      // order = localStorage.getItem("order");
      console.log("order to render")
      console.log(order.length);
      console.log(order);
      // console.log(order[0].name);
      for (var i = 0; i < order.length; i++) {
        // order = orderDetails[i];
        console.log(i);
        // console.log(order);

        // order = JSON.parse(orderDetails[i]);

        content += "<tr data-id='"+ i + "'>";
        content += "<td>" + order[i].name + "</td>";
        content += "<td>" + order[i].age + "</td>";
        content += "<td>" + order[i].diet + "</td>";
        content += "<td>" + order[i].menu + "</td>";
        content += "<td><a href='#'>Remove</a></td>";
        content += "</td>";
      }
      console.log(orderDetails)

      // add the table to the page
      $(".orderTable table tbody").html(content);
      $("section.orderTable").show();
    };


      $("section.orderTable a#confirmOrder").click(function(e){
        e.preventDefault();
        $("section.orderTable").hide();
        $("section.orderConfirmed").show();
      });

      $("section.orderTable a#newOrder").click(function(e){
        e.preventDefault();
        $("section.orderTable").hide();
        $("section.addPerson").show();
        addPerson();
      });





  })

  </script>
</body>
</html>
